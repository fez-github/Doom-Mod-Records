{% extends 'base.html' %}
{% from 'macros.html' import create_record_card with context %}

{% block content %}
    <div class="card"  style="width:65%">
        <div class="card-header">
            <span card="card-title">
                <h2><a href="{{mod.url}}">
                    <img class="idImage" src="/static/images/idgamesFavicon.png">
                </a>
                <u>{{mod.title}}</u>
                </h2>
            </span>
        </div>
        <div class="card-body d-flex flex-row">

            <ul class="d-flex flex-column no-bullets col-sm-3">
                <li class="card-text"><b>Author:</b> {{mod.author}}</li>
                <li class="card-text"><b>Category:</b> {{mod.category}}</li>
                <li class="card-text"><b>Date Uploaded:</b> {{mod.date_uploaded}}</li>
                <li class="card-text"><b>Date Pulled:</b> {{mod.date_updated}}</li>
                <li class="card-text"><b>Rating:</b> {{ 20*mod.rating|round|int }}%({{mod.rating_count}} votes)</li>
            </ul>
            <div class="col-sm-9">
                <h3>Description:</h3>
                <article class=>{{mod.description}}</article>
            </div>
        </div>
        <div class="d-flex flex-row">
        {% if g.user %}
        <form action="{{ url_for('get_mod', mod_id = mod.id) }}" method="POST" style="margin-bottom:15px;">
            <button id="addModButton">Add to Records</button>
        </form>
        <form action="{{ url_for('delete_mod', mod_id = mod.id) }}" method="POST" style="margin-bottom:15px;">
            <button id="addModButton">Delete Mod</button>
        </form>
        {% endif %}
        </div>
    </div>
    <p>
        <h2>Records:</h2>
        {% for record in mod.records %}
            {{ create_record_card(record) }}
        {% endfor %}
    </p>

    <form action="{{ url_for('mod_list')}}" style="margin-bottom:15px;" method="GET">
        <button>Return to Mods</button>
    </form>
    <script src="/static/mod.js"></script>

{% endblock %}