{% extends 'base.html' %}
{% from 'macros.html' import create_record_card with context %}

{% block content %}
<!--
    <div id="modInfo" class="searchedMod" mod_id="{{mod.id}}">
        <p id="dir">{{mod.category}}</p>
        <h2>
            {{mod.title}}
        </h2>
        <a href="{{ url_for('get_mod', mod_id = mod.id) }}" id="title">Idgames Source</a>
        <p id="author">Author: {{mod.author}}</p>
        <p id="date_uploaded">Date Uploaded: {{mod.date_uploaded}}</p>
        <p id="date_updated">Date Updated: {{mod.date_updated}}</p>
        <p id="description">{{mod.description}}</p>
        <p id="rating">Rating: {{mod.rating}}   Votes: {{mod.rating_count}}</p>

    </div>
-->
    <div class="card"  style="width:65%">
        <div class="card-header">
            <span card="card-title">
                <h2><a href="{{mod.url}}">
                    <img class="idImage" src="/static/images/idgamesFavicon.png">
                </a>
                <u>{{mod.title}}</u>
                </h2>
            </span>
        </div>
        <div class="card-body d-flex flex-row flexWrap">
            <p class="flexContainer d-flex flex-wrap col-sm-3">
                <span class="card-text">Author: {{mod.author}}</span>
                <span class="card-text">Category: {{mod.category}}</span>
                <span class="card-text">Date Uploaded: {{mod.date_uploaded}}</span>
                <span class="card-text">Date Updated: {{mod.date_updated}}</span>
                <span class="card-text">Rating: {{ 20*mod.rating|round|int }}%({{mod.rating_count}} votes)</span>
            </p>
            <div class="col-sm-9">
                <h3>Description:</h3>
                <article class=>{{mod.description}}</article>
            </div>
        </div>
        <div class="d-flex flex-row">
        {% if g.user %}
        <form action="{{ url_for('get_mod', mod_id = mod.id) }}" method="POST" style="margin-bottom:15px;">
            <button id="addModButton">Add to Records</button>
        </form>
        <form action="{{ url_for('delete_mod', mod_id = mod.id) }}" method="POST" style="margin-bottom:15px;">
            <button id="addModButton">Delete Mod</button>
        </form>
        {% endif %}
        </div>
    </div>
    <p>
        <h2>Records:</h2>
        {% for record in mod.records %}
            {{ create_record_card(record) }}
        {% endfor %}
    </p>

    <form action="{{ url_for('mod_list')}}" style="margin-bottom:20px;" method="GET">
        <button>Return to Mods</button>
    </form>

    <script src="/static/mod.js"></script>

{% endblock %}